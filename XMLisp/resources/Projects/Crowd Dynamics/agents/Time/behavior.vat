<?xml version="1.0"?>
<behavior comments="What am I doing?">
  <method disclosed="true" comments="run experiment for 60 seconds">
    <while-running/>
    <rule>
      <if>
        <test expression1="Time" operator="&gt;=" expression2="@Experiment_Duration"/>
      </if>
      <then>
        <set attribute="@TOTAL_PEOPLE" value="0"/>
        <set attribute="@SAFE_PEOPLE" value="0"/>
        <set attribute="@UNSAFE_PEOPLE" value="0"/>
        <broadcast class-name="Floor" selector="Count_Unsafe"/>
        <broadcast class-name="Safeplace" selector="Count_Safe"/>
        <broadcast class-name="Person" selector="Count"/>
        <show-message disclosed="true" text="Simulation Is Over! Out Of ~@Total_People People, ~@Safe_People Survived" subtext="Better Luck Next Time"/>
        <stop-simulation/>
      </then>
    </rule>
    <rule>
      <if>
        <once-every seconds="1"/>
      </if>
      <then>
        <set attribute="TIME" value="Time+1"/>
      </then>
    </rule>
  </method>
  <method disclosed="true">
    <on selector="Count_Safe"/>
    <rule>
      <if>
        <stacked adjacency="Immediately Below" shape="STANDING Person"/>
      </if>
      <then/>
    </rule>
  </method>
</behavior>
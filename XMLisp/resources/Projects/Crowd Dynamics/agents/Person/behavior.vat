<?xml version="1.0"?>
<behavior comments="What am I doing?">
  <method disclosed="true">
    <while-running/>
    <rule>
      <if/>
      <then>
        <set attribute="HEAT" value="(Heat[right] + Heat[left] + Heat[up] + Heat[down] ) * 0.25"/>
        <set attribute="SAFE" value="((Safe[right] + Safe[left] + Safe[up] + Safe[down] ) * 0.25 * 0.5)"/>
        <set attribute="HERDING" value="((Herding[right] + Herding[left] + Herding[up] + Herding[down] ) * 0.25) + 20"/>
        <message selector="HERDING">
          <direction/>
        </message>
      </then>
    </rule>
  </method>
  <method disclosed="true">
    <on selector="Herding"/>
    <rule>
      <if>
        <percent-chance/>
      </if>
      <then>
        <message selector="MOVE">
          <direction/>
        </message>
      </then>
    </rule>
    <rule>
      <if>
        <stacked-a class-name="SAFEPLACE"/>
      </if>
      <then>
        <message selector="MOVE">
          <direction/>
        </message>
      </then>
    </rule>
    <rule>
      <if>
        <see-a class-name="FLOOR">
          <direction dcol="-1"/>
        </see-a>
        <test expression1="Herding[Left]" operator="&gt;" expression2="15"/>
      </if>
      <then>
        <rotate-to roll-angle="270"/>
        <move animation="Accelerated" duration="Slider()">
          <direction dcol="-1"/>
        </move>
      </then>
    </rule>
    <rule>
      <if>
        <see-a class-name="FLOOR">
          <direction dcol="1"/>
        </see-a>
        <test expression1="Herding[Right]" operator="&gt;" expression2="15"/>
      </if>
      <then>
        <rotate-to roll-angle="90"/>
        <move duration="Slider()">
          <direction dcol="1"/>
        </move>
      </then>
    </rule>
    <rule>
      <if>
        <see-a class-name="FLOOR">
          <direction drow="1"/>
        </see-a>
        <test expression1="Herding[up]" operator="&gt;" expression2="15"/>
      </if>
      <then>
        <rotate-to roll-angle="180"/>
        <move duration="Slider()">
          <direction drow="1"/>
        </move>
      </then>
    </rule>
    <rule>
      <if>
        <see-a class-name="FLOOR">
          <direction drow="-1"/>
        </see-a>
        <test expression1="Herding[down]" operator="&gt;" expression2="15"/>
      </if>
      <then>
        <rotate-to/>
        <move duration="Slider()">
          <direction drow="-1"/>
        </move>
      </then>
    </rule>
    <rule>
      <if/>
      <then>
        <message selector="MOVE">
          <direction/>
        </message>
      </then>
    </rule>
  </method>
  <method disclosed="true">
    <on selector="MOVE"/>
    <rule>
      <if>
        <test expression1="safe" operator="&gt;" expression2="98"/>
      </if>
      <then>
        <message selector="HEATMOVE">
          <direction/>
        </message>
      </then>
    </rule>
    <rule>
      <if>
        <percent-chance expression="100"/>
      </if>
      <then>
        <message selector="SAFEMOVE">
          <direction/>
        </message>
      </then>
    </rule>
    <rule>
      <if>
        <test expression1="heat" operator="&gt;" expression2="safe"/>
      </if>
      <then>
        <message selector="HEATMOVE">
          <direction/>
        </message>
      </then>
    </rule>
    <rule>
      <if>
        <test expression1="safe" operator="&gt;=" expression2="heat"/>
      </if>
      <then>
        <message selector="SAFEMOVE">
          <direction/>
        </message>
      </then>
    </rule>
  </method>
  <method>
    <on selector="HEATMOVE"/>
    <rule>
      <if>
        <test expression1="Heat[left]" operator="&lt;" expression2="Heat[right]"/>
        <test expression1="Heat[left]" operator="&lt;" expression2="Heat[up]"/>
        <test expression1="Heat[left]" operator="&lt;" expression2="Heat[down]"/>
      </if>
      <then>
        <message selector="MOVELEFT">
          <direction/>
        </message>
      </then>
    </rule>
    <rule>
      <if>
        <test expression1="Heat[right]" operator="&lt;" expression2="Heat[left]"/>
        <test expression1="Heat[right]" operator="&lt;" expression2="Heat[up]"/>
        <test expression1="Heat[right]" operator="&lt;" expression2="Heat[down]"/>
      </if>
      <then>
        <message selector="MOVERIGHT">
          <direction/>
        </message>
      </then>
    </rule>
    <rule>
      <if>
        <test expression1="Heat[up]" operator="&lt;" expression2="Heat[right]"/>
        <test expression1="Heat[up]" operator="&lt;" expression2="Heat[left]"/>
        <test expression1="Heat[up]" operator="&lt;" expression2="Heat[down]"/>
      </if>
      <then>
        <message selector="MOVEUP">
          <direction/>
        </message>
      </then>
    </rule>
    <rule>
      <if>
        <test expression1="Heat[down]" operator="&lt;" expression2="Heat[right]"/>
        <test expression1="Heat[down]" operator="&lt;" expression2="Heat[up]"/>
        <test expression1="Heat[down]" operator="&lt;" expression2="Heat[left]"/>
      </if>
      <then>
        <message selector="MOVEDOWN">
          <direction/>
        </message>
      </then>
    </rule>
  </method>
  <method>
    <on selector="SAFEMOVE"/>
    <rule>
      <if>
        <test expression1="Safe[left]" operator="&gt;" expression2="Safe[right]"/>
        <test expression1="Safe[left]" operator="&gt;" expression2="Safe[up]"/>
        <test expression1="Safe[left]" operator="&gt;" expression2="Safe[down]"/>
      </if>
      <then>
        <message selector="MOVELEFT">
          <direction/>
        </message>
      </then>
    </rule>
    <rule>
      <if>
        <test expression1="Safe[right]" operator="&gt;" expression2="Safe[left]"/>
        <test expression1="Safe[right]" operator="&gt;" expression2="Safe[up]"/>
        <test expression1="Safe[right]" operator="&gt;" expression2="Safe[down]"/>
      </if>
      <then>
        <message selector="MOVERIGHT">
          <direction/>
        </message>
      </then>
    </rule>
    <rule>
      <if>
        <test expression1="Safe[up]" operator="&gt;" expression2="Safe[right]"/>
        <test expression1="Safe[up]" operator="&gt;" expression2="Safe[left]"/>
        <test expression1="Safe[up]" operator="&gt;" expression2="Safe[down]"/>
      </if>
      <then>
        <message selector="MOVEUP">
          <direction/>
        </message>
      </then>
    </rule>
    <rule>
      <if>
        <test expression1="Safe[down]" operator="&gt;" expression2="Safe[right]"/>
        <test expression1="Safe[down]" operator="&gt;" expression2="Safe[up]"/>
        <test expression1="Safe[down]" operator="&gt;" expression2="Safe[left]"/>
      </if>
      <then>
        <message selector="MOVEDOWN">
          <direction/>
        </message>
      </then>
    </rule>
  </method>
  <method disclosed="true">
    <on selector="MOVELEFT"/>
    <rule>
      <if>
        <see-a class-name="FLOOR">
          <direction dcol="-1"/>
        </see-a>
      </if>
      <then>
        <rotate-to roll-angle="270"/>
        <move duration="Slider()">
          <direction dcol="-1"/>
        </move>
      </then>
    </rule>
    <rule>
      <if>
        <see-a class-name="SAFEPLACE">
          <direction dcol="-1"/>
        </see-a>
      </if>
      <then>
        <rotate-to roll-angle="270"/>
        <move disclosed="true" duration="Slider()">
          <direction dcol="-1"/>
        </move>
      </then>
    </rule>
    <rule>
      <if/>
      <then/>
    </rule>
    <rule>
      <if/>
      <then>
        <message selector="MOVEFREE">
          <direction/>
        </message>
      </then>
    </rule>
  </method>
  <method disclosed="true">
    <on selector="MOVERIGHT"/>
    <rule>
      <if>
        <see-a class-name="FLOOR">
          <direction dcol="1"/>
        </see-a>
      </if>
      <then>
        <rotate-to roll-angle="90"/>
        <move duration="@animation">
          <direction dcol="1"/>
        </move>
      </then>
    </rule>
    <rule>
      <if>
        <see-a class-name="SAFEPLACE">
          <direction dcol="1"/>
        </see-a>
      </if>
      <then>
        <rotate-to roll-angle="90"/>
        <move duration="@animation">
          <direction dcol="1"/>
        </move>
      </then>
    </rule>
    <rule>
      <if/>
      <then/>
    </rule>
    <rule>
      <if/>
      <then>
        <message selector="MOVEFREE">
          <direction/>
        </message>
      </then>
    </rule>
  </method>
  <method disclosed="true">
    <on selector="MOVEUP"/>
    <rule>
      <if>
        <see-a class-name="FLOOR">
          <direction drow="1"/>
        </see-a>
      </if>
      <then>
        <rotate-to roll-angle="180"/>
        <move duration="Slider()">
          <direction drow="1"/>
        </move>
      </then>
    </rule>
    <rule>
      <if>
        <see-a class-name="SAFEPLACE">
          <direction drow="1"/>
        </see-a>
      </if>
      <then>
        <rotate-to roll-angle="180"/>
        <move duration="Slider()">
          <direction drow="1"/>
        </move>
      </then>
    </rule>
    <rule>
      <if/>
      <then/>
    </rule>
    <rule>
      <if/>
      <then>
        <message selector="MOVEFREE">
          <direction/>
        </message>
      </then>
    </rule>
  </method>
  <method disclosed="true">
    <on selector="MOVEDOWN"/>
    <rule>
      <if>
        <see-a class-name="FLOOR">
          <direction drow="-1"/>
        </see-a>
      </if>
      <then>
        <rotate-to/>
        <move duration="@animation">
          <direction drow="-1"/>
        </move>
      </then>
    </rule>
    <rule>
      <if>
        <see-a class-name="SAFEPLACE">
          <direction drow="-1"/>
        </see-a>
      </if>
      <then>
        <rotate-to/>
        <move duration="@animation">
          <direction drow="-1"/>
        </move>
      </then>
    </rule>
    <rule>
      <if/>
      <then/>
    </rule>
    <rule>
      <if/>
      <then>
        <message selector="MOVEFREE">
          <direction/>
        </message>
      </then>
    </rule>
  </method>
  <method>
    <on selector="MOVEFREE"/>
    <rule>
      <if>
        <see-a class-name="SAFEPLACE">
          <direction dcol="1"/>
        </see-a>
      </if>
      <then>
        <rotate-to roll-angle="180"/>
        <move duration="Slider()">
          <direction dcol="1"/>
        </move>
      </then>
    </rule>
    <rule>
      <if>
        <see-a class-name="SAFEPLACE">
          <direction drow="-1"/>
        </see-a>
      </if>
      <then>
        <rotate-to roll-angle="90"/>
        <move duration="Slider()">
          <direction drow="-1"/>
        </move>
      </then>
    </rule>
    <rule>
      <if>
        <see-a class-name="SAFEPLACE">
          <direction dcol="-1"/>
        </see-a>
      </if>
      <then>
        <rotate-to/>
        <move duration="Slider()">
          <direction dcol="-1"/>
        </move>
      </then>
    </rule>
    <rule>
      <if>
        <see-a class-name="SAFEPLACE">
          <direction drow="1"/>
        </see-a>
      </if>
      <then>
        <rotate-to roll-angle="270"/>
        <move duration="Slider()">
          <direction drow="1"/>
        </move>
      </then>
    </rule>
    <rule>
      <if>
        <see-a class-name="FLOOR">
          <direction drow="1"/>
        </see-a>
      </if>
      <then>
        <rotate-to roll-angle="180"/>
        <move duration="Slider()">
          <direction drow="1"/>
        </move>
      </then>
    </rule>
    <rule>
      <if>
        <see-a class-name="FLOOR">
          <direction dcol="-1"/>
        </see-a>
      </if>
      <then>
        <rotate-to roll-angle="270"/>
        <move duration="@animation">
          <direction dcol="-1"/>
        </move>
      </then>
    </rule>
    <rule>
      <if>
        <see-a class-name="FLOOR">
          <direction drow="-1"/>
        </see-a>
      </if>
      <then>
        <rotate-to/>
        <move duration="Slider()">
          <direction drow="-1"/>
        </move>
      </then>
    </rule>
    <rule>
      <if>
        <see-a class-name="FLOOR">
          <direction dcol="1"/>
        </see-a>
      </if>
      <then>
        <rotate-to roll-angle="90"/>
        <move duration="Slider()">
          <direction dcol="1"/>
        </move>
      </then>
    </rule>
  </method>
  <method disclosed="true">
    <on selector="Count"/>
    <rule>
      <if/>
      <then>
        <set attribute="@TOTAL_PEOPLE" value="@Total_People + 1"/>
      </then>
    </rule>
  </method>
</behavior>
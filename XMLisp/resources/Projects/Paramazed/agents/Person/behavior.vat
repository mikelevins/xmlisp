<?xml version="1.0"?>
<behavior>
  <method disclosed="true" comments="Put text here to explain what this method does!">
    <while-running/>
    <rule>
      <if>
        <stacked shape="goal GOAL"/>
      </if>
      <then>
        <erase>
          <direction/>
        </erase>
        <wait duration="0.01"/>
        <set attribute="@LEFT" value="0"/>
        <broadcast class-name="Person" selector="count"/>
        <broadcast class-name="Goal" selector="check_win"/>
      </then>
    </rule>
    <rule>
      <if>
        <stacked shape="pit PIT"/>
      </if>
      <then>
        <erase>
          <direction/>
        </erase>
        <wait duration="0.01"/>
        <play-sound ref="Explode.Mp3"/>
        <show-message text="Someone fell down a pit!"/>
        <reload-world/>
      </then>
    </rule>
  </method>
  <method disclosed="true" comments="Put text here to explain what this method does!">
    <on selector="COUNT"/>
    <rule>
      <if/>
      <then>
        <set attribute="@LEFT" value="@left + 1"/>
      </then>
    </rule>
  </method>
  <method disclosed="true" comments="Put text here to explain what this method does!">
    <on selector="TRY_UP"/>
    <rule>
      <if>
        <see shape="GOAL GOAL">
          <direction drow="1"/>
        </see>
        <see shape="PERSON PERSON">
          <direction drow="-1"/>
        </see>
      </if>
      <then>
        <message selector="move_up">
          <direction drow="-1"/>
        </message>
        <move>
          <direction drow="1"/>
        </move>
      </then>
    </rule>
    <rule>
      <if>
        <see shape="GOAL GOAL">
          <direction drow="1"/>
        </see>
      </if>
      <then>
        <move>
          <direction drow="1"/>
        </move>
      </then>
    </rule>
    <rule>
      <if>
        <see shape="FLOOR FLOOR">
          <direction drow="1"/>
        </see>
        <see shape="PERSON PERSON">
          <direction drow="-1"/>
        </see>
      </if>
      <then>
        <message selector="move_up">
          <direction drow="-1"/>
        </message>
        <move>
          <direction drow="1"/>
        </move>
      </then>
    </rule>
    <rule>
      <if>
        <see shape="FLOOR FLOOR">
          <direction drow="1"/>
        </see>
      </if>
      <then>
        <move>
          <direction drow="1"/>
        </move>
      </then>
    </rule>
    <rule>
      <if>
        <see shape="PIT PIT">
          <direction drow="1"/>
        </see>
        <see shape="PERSON PERSON">
          <direction drow="-1"/>
        </see>
      </if>
      <then>
        <message selector="move_up">
          <direction drow="-1"/>
        </message>
        <move>
          <direction drow="1"/>
        </move>
      </then>
    </rule>
    <rule>
      <if>
        <see shape="PIT PIT">
          <direction drow="1"/>
        </see>
      </if>
      <then>
        <move>
          <direction drow="1"/>
        </move>
      </then>
    </rule>
    <rule>
      <if>
        <see shape="SWITCH SWITCH">
          <direction drow="1"/>
        </see>
        <see shape="PERSON PERSON">
          <direction drow="-1"/>
        </see>
      </if>
      <then>
        <message selector="move_up">
          <direction drow="-1"/>
        </message>
        <move>
          <direction drow="1"/>
        </move>
      </then>
    </rule>
    <rule>
      <if>
        <see shape="SWITCH SWITCH">
          <direction drow="1"/>
        </see>
      </if>
      <then>
        <move>
          <direction drow="1"/>
        </move>
      </then>
    </rule>
    <rule>
      <if>
        <see shape="SWITCH_PRESSED SWITCH">
          <direction drow="1"/>
        </see>
        <see shape="PERSON PERSON">
          <direction drow="-1"/>
        </see>
      </if>
      <then>
        <message selector="move_up">
          <direction drow="-1"/>
        </message>
        <move>
          <direction drow="1"/>
        </move>
      </then>
    </rule>
    <rule>
      <if>
        <see shape="SWITCH_PRESSED SWITCH">
          <direction drow="1"/>
        </see>
      </if>
      <then>
        <move>
          <direction drow="1"/>
        </move>
      </then>
    </rule>
    <rule>
      <if>
        <see shape="DOOR_OPEN DOOR">
          <direction drow="1"/>
        </see>
        <see shape="PERSON PERSON">
          <direction drow="-1"/>
        </see>
      </if>
      <then>
        <message selector="move_up">
          <direction drow="-1"/>
        </message>
        <move>
          <direction drow="1"/>
        </move>
      </then>
    </rule>
    <rule>
      <if>
        <see shape="DOOR_OPEN DOOR">
          <direction drow="1"/>
        </see>
      </if>
      <then>
        <move>
          <direction drow="1"/>
        </move>
      </then>
    </rule>
  </method>
  <method comments="Put text here to explain what this method does!">
    <on selector="TRY_DOWN"/>
    <rule>
      <if>
        <see shape="GOAL GOAL">
          <direction drow="-1"/>
        </see>
        <see shape="PERSON PERSON">
          <direction drow="1"/>
        </see>
      </if>
      <then>
        <message selector="move_down">
          <direction drow="1"/>
        </message>
        <move>
          <direction drow="-1"/>
        </move>
      </then>
    </rule>
    <rule>
      <if>
        <see shape="GOAL GOAL">
          <direction drow="-1"/>
        </see>
      </if>
      <then>
        <move>
          <direction drow="-1"/>
        </move>
      </then>
    </rule>
    <rule>
      <if>
        <see shape="FLOOR FLOOR">
          <direction drow="-1"/>
        </see>
        <see shape="PERSON PERSON">
          <direction drow="1"/>
        </see>
      </if>
      <then>
        <message selector="move_down">
          <direction drow="1"/>
        </message>
        <move>
          <direction drow="-1"/>
        </move>
      </then>
    </rule>
    <rule>
      <if>
        <see shape="FLOOR FLOOR">
          <direction drow="-1"/>
        </see>
      </if>
      <then>
        <move>
          <direction drow="-1"/>
        </move>
      </then>
    </rule>
    <rule>
      <if>
        <see shape="PIT PIT">
          <direction drow="-1"/>
        </see>
        <see shape="PERSON PERSON">
          <direction drow="1"/>
        </see>
      </if>
      <then>
        <message selector="move_down">
          <direction drow="1"/>
        </message>
        <move>
          <direction drow="-1"/>
        </move>
      </then>
    </rule>
    <rule>
      <if>
        <see shape="PIT PIT">
          <direction drow="-1"/>
        </see>
      </if>
      <then>
        <move>
          <direction drow="-1"/>
        </move>
      </then>
    </rule>
    <rule>
      <if>
        <see shape="SWITCH SWITCH">
          <direction drow="-1"/>
        </see>
        <see shape="PERSON PERSON">
          <direction drow="1"/>
        </see>
      </if>
      <then>
        <message selector="move_down">
          <direction drow="1"/>
        </message>
        <move>
          <direction drow="-1"/>
        </move>
      </then>
    </rule>
    <rule>
      <if>
        <see shape="SWITCH SWITCH">
          <direction drow="-1"/>
        </see>
      </if>
      <then>
        <move>
          <direction drow="-1"/>
        </move>
      </then>
    </rule>
    <rule>
      <if>
        <see shape="SWITCH_PRESSED SWITCH">
          <direction drow="-1"/>
        </see>
        <see shape="PERSON PERSON">
          <direction drow="1"/>
        </see>
      </if>
      <then>
        <message selector="move_down">
          <direction drow="1"/>
        </message>
        <move>
          <direction drow="-1"/>
        </move>
      </then>
    </rule>
    <rule>
      <if>
        <see shape="SWITCH_PRESSED SWITCH">
          <direction drow="-1"/>
        </see>
      </if>
      <then>
        <move>
          <direction drow="-1"/>
        </move>
      </then>
    </rule>
    <rule>
      <if>
        <see shape="DOOR_OPEN DOOR">
          <direction drow="-1"/>
        </see>
        <see shape="PERSON PERSON">
          <direction drow="1"/>
        </see>
      </if>
      <then>
        <message selector="move_down">
          <direction drow="1"/>
        </message>
        <move>
          <direction drow="-1"/>
        </move>
      </then>
    </rule>
    <rule>
      <if>
        <see shape="DOOR_OPEN DOOR">
          <direction drow="-1"/>
        </see>
      </if>
      <then>
        <move>
          <direction drow="-1"/>
        </move>
      </then>
    </rule>
  </method>
  <method comments="Put text here to explain what this method does!">
    <on selector="TRY_LEFT"/>
    <rule>
      <if>
        <see shape="GOAL GOAL">
          <direction dcol="-1"/>
        </see>
        <see shape="PERSON PERSON">
          <direction dcol="1"/>
        </see>
      </if>
      <then>
        <message selector="move_left">
          <direction dcol="1"/>
        </message>
        <move>
          <direction dcol="-1"/>
        </move>
      </then>
    </rule>
    <rule>
      <if>
        <see shape="GOAL GOAL">
          <direction dcol="-1"/>
        </see>
      </if>
      <then>
        <move>
          <direction dcol="-1"/>
        </move>
      </then>
    </rule>
    <rule>
      <if>
        <see shape="FLOOR FLOOR">
          <direction dcol="-1"/>
        </see>
        <see shape="PERSON PERSON">
          <direction dcol="1"/>
        </see>
      </if>
      <then>
        <message selector="move_left">
          <direction dcol="1"/>
        </message>
        <move>
          <direction dcol="-1"/>
        </move>
      </then>
    </rule>
    <rule>
      <if>
        <see shape="FLOOR FLOOR">
          <direction dcol="-1"/>
        </see>
      </if>
      <then>
        <move>
          <direction dcol="-1"/>
        </move>
      </then>
    </rule>
    <rule>
      <if>
        <see shape="PIT PIT">
          <direction dcol="-1"/>
        </see>
        <see shape="PERSON PERSON">
          <direction dcol="1"/>
        </see>
      </if>
      <then>
        <message selector="move_left">
          <direction dcol="1"/>
        </message>
        <move>
          <direction dcol="-1"/>
        </move>
      </then>
    </rule>
    <rule>
      <if>
        <see shape="PIT PIT">
          <direction dcol="-1"/>
        </see>
      </if>
      <then>
        <move>
          <direction dcol="-1"/>
        </move>
      </then>
    </rule>
    <rule>
      <if>
        <see shape="SWITCH SWITCH">
          <direction dcol="-1"/>
        </see>
        <see shape="PERSON PERSON">
          <direction dcol="1"/>
        </see>
      </if>
      <then>
        <message selector="move_left">
          <direction dcol="1"/>
        </message>
        <move>
          <direction dcol="-1"/>
        </move>
      </then>
    </rule>
    <rule>
      <if>
        <see shape="SWITCH SWITCH">
          <direction dcol="-1"/>
        </see>
      </if>
      <then>
        <move>
          <direction dcol="-1"/>
        </move>
      </then>
    </rule>
    <rule>
      <if>
        <see shape="SWITCH_PRESSED SWITCH">
          <direction dcol="-1"/>
        </see>
        <see shape="PERSON PERSON">
          <direction dcol="1"/>
        </see>
      </if>
      <then>
        <message selector="move_left">
          <direction dcol="1"/>
        </message>
        <move>
          <direction dcol="-1"/>
        </move>
      </then>
    </rule>
    <rule>
      <if>
        <see shape="SWITCH_PRESSED SWITCH">
          <direction dcol="-1"/>
        </see>
      </if>
      <then>
        <move>
          <direction dcol="-1"/>
        </move>
      </then>
    </rule>
    <rule>
      <if>
        <see shape="DOOR_VERTICAL_OPEN DOOR">
          <direction dcol="-1"/>
        </see>
        <see shape="PERSON PERSON">
          <direction dcol="1"/>
        </see>
      </if>
      <then>
        <message selector="move_left">
          <direction dcol="1"/>
        </message>
        <move>
          <direction dcol="-1"/>
        </move>
      </then>
    </rule>
    <rule>
      <if>
        <see shape="DOOR_VERTICAL_OPEN DOOR">
          <direction dcol="-1"/>
        </see>
      </if>
      <then>
        <move>
          <direction dcol="-1"/>
        </move>
      </then>
    </rule>
  </method>
  <method comments="Put text here to explain what this method does!">
    <on selector="TRY_RIGHT"/>
    <rule>
      <if>
        <see shape="GOAL GOAL">
          <direction dcol="1"/>
        </see>
        <see shape="PERSON PERSON">
          <direction dcol="-1"/>
        </see>
      </if>
      <then>
        <message selector="move_right">
          <direction dcol="-1"/>
        </message>
        <move>
          <direction dcol="1"/>
        </move>
      </then>
    </rule>
    <rule>
      <if>
        <see shape="GOAL GOAL">
          <direction dcol="1"/>
        </see>
      </if>
      <then>
        <move>
          <direction dcol="1"/>
        </move>
      </then>
    </rule>
    <rule>
      <if>
        <see shape="FLOOR FLOOR">
          <direction dcol="1"/>
        </see>
        <see shape="PERSON PERSON">
          <direction dcol="-1"/>
        </see>
      </if>
      <then>
        <message selector="move_right">
          <direction dcol="-1"/>
        </message>
        <move>
          <direction dcol="1"/>
        </move>
      </then>
    </rule>
    <rule>
      <if>
        <see shape="FLOOR FLOOR">
          <direction dcol="1"/>
        </see>
      </if>
      <then>
        <move>
          <direction dcol="1"/>
        </move>
      </then>
    </rule>
    <rule>
      <if>
        <see shape="PIT PIT">
          <direction dcol="1"/>
        </see>
        <see shape="PERSON PERSON">
          <direction dcol="-1"/>
        </see>
      </if>
      <then>
        <message selector="move_right">
          <direction dcol="-1"/>
        </message>
        <move>
          <direction dcol="1"/>
        </move>
      </then>
    </rule>
    <rule>
      <if>
        <see shape="PIT PIT">
          <direction dcol="1"/>
        </see>
      </if>
      <then>
        <move>
          <direction dcol="1"/>
        </move>
      </then>
    </rule>
    <rule>
      <if>
        <see shape="SWITCH SWITCH">
          <direction dcol="1"/>
        </see>
        <see shape="PERSON PERSON">
          <direction dcol="-1"/>
        </see>
      </if>
      <then>
        <message selector="move_right">
          <direction dcol="-1"/>
        </message>
        <move>
          <direction dcol="1"/>
        </move>
      </then>
    </rule>
    <rule>
      <if>
        <see shape="SWITCH SWITCH">
          <direction dcol="1"/>
        </see>
      </if>
      <then>
        <move>
          <direction dcol="1"/>
        </move>
      </then>
    </rule>
    <rule>
      <if>
        <see shape="SWITCH_PRESSED SWITCH">
          <direction dcol="1"/>
        </see>
        <see shape="PERSON PERSON">
          <direction dcol="-1"/>
        </see>
      </if>
      <then>
        <message selector="move_right">
          <direction dcol="-1"/>
        </message>
        <move>
          <direction dcol="1"/>
        </move>
      </then>
    </rule>
    <rule>
      <if>
        <see shape="SWITCH_PRESSED SWITCH">
          <direction dcol="1"/>
        </see>
      </if>
      <then>
        <move>
          <direction dcol="1"/>
        </move>
      </then>
    </rule>
    <rule>
      <if>
        <see shape="DOOR_VERTICAL_OPEN DOOR">
          <direction dcol="1"/>
        </see>
        <see shape="PERSON PERSON">
          <direction dcol="-1"/>
        </see>
      </if>
      <then>
        <message selector="move_right">
          <direction dcol="-1"/>
        </message>
        <move>
          <direction dcol="1"/>
        </move>
      </then>
    </rule>
    <rule>
      <if>
        <see shape="DOOR_VERTICAL_OPEN DOOR">
          <direction dcol="1"/>
        </see>
      </if>
      <then>
        <move>
          <direction dcol="1"/>
        </move>
      </then>
    </rule>
  </method>
  <method comments="Put text here to explain what this method does!">
    <on selector="MOVE_UP"/>
    <rule>
      <if/>
      <then>
        <move>
          <direction drow="1"/>
        </move>
      </then>
    </rule>
  </method>
  <method disclosed="true" comments="Put text here to explain what this method does!">
    <on selector="MOVE_DOWN"/>
    <rule>
      <if/>
      <then>
        <move>
          <direction drow="-1"/>
        </move>
      </then>
    </rule>
  </method>
  <method comments="Put text here to explain what this method does!">
    <on selector="MOVE_LEFT"/>
    <rule>
      <if/>
      <then>
        <move>
          <direction dcol="-1"/>
        </move>
      </then>
    </rule>
  </method>
  <method comments="Put text here to explain what this method does!">
    <on selector="MOVE_RIGHT"/>
    <rule>
      <if/>
      <then>
        <move>
          <direction dcol="1"/>
        </move>
      </then>
    </rule>
  </method>
  <method disclosed="true">
    <on selector="Aim_Up"/>
    <rule>
      <if/>
      <then>
        <rotate-to disclosed="true" duration="Slider()"/>
      </then>
    </rule>
  </method>
  <method disclosed="true">
    <on selector="Aim_Down"/>
    <rule>
      <if/>
      <then>
        <rotate-to disclosed="true" roll-angle="180" duration="Slider()"/>
      </then>
    </rule>
  </method>
  <method disclosed="true">
    <on selector="Aim_Left"/>
    <rule>
      <if/>
      <then>
        <rotate-to disclosed="true" roll-angle="90" duration="Slider()"/>
      </then>
    </rule>
  </method>
  <method disclosed="true">
    <on selector="Aim_Right"/>
    <rule>
      <if/>
      <then>
        <rotate-to disclosed="true" roll-angle="270" duration="Slider()"/>
      </then>
    </rule>
  </method>
</behavior>